{% extends "layout.html" %}
{% block extra_head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='stylesheet/my_meal_plan.css') }}" >
{% endblock %}
{% block body %}  

  <div class="container-fluid">
    <div class="row justify-content-md-center my-meal-plan-form">
      <div>
        <h1> Current Meal Plan </h1>
      </div>
    </div>
    <div class="row justify-content-md-center"> 
      {% if current_meal_plan %}
      <div id="current-meal-plan">
        <div class="container">
          <div class="row">
            {% for m in current_meal_plan.meal_id_list %}
            <div class="col card" style="width: 20rem;">
              <div class="card-body">
                <p class="card-text">
                  {{ m.name }}
                </p>
              </div>
              <image class="card-img-bottom" src="{{ m.img_url }}" alt="picture of food?">
            </div>
            {% endfor %}
            </div>
          </div>
        </div>
      </div>
    {% else %}
    <p> There is currently no active meal plan. Please choose one from below.</p>
    {% endif %}
    </div>
    <div class="row justify-content-md-center my-meal-plan-form">
      <div>
        <h1> Saved Meal Plans </h1>
      </div>
    </div>
    <div class="row justify-content-md-center"> 
      {% if saved_meal_plans %}
        <div id="saved-meal-plans" class="col-sm-8">
          {% for mp in saved_meal_plans %}
            <div class="container">
              <div class="row">
                {% for m in mp.meal_id_list %}
                <div class="col card">
                  <div class="card-body">
                    <h4 class="card-title">
                      {{ m.name }}
                    </h4>
                  </div>
                  <div class="row">
                    <div class="col">
                      <image class="card-img-bottom img-rounded" src="{{ m.img_url }}" alt="{{ m.name }}">
                    </div>
                    <div class="col">
                      <image class="card-img-bottom img-rounded" src="{{ m.img_url }}" alt="{{ m.name }}">
                    </div>
                    <div class="col">
                      <image class="card-img-bottom img-rounded" src="{{ m.img_url }}" alt="{{ m.name }}">
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
              <form method=POST action="{{ url_for('my_meal_plan') }}">
                <div class="form-group">
                  <input type="hidden" class="form-control" name="userid" value="{{user.id}}">       
                  <input type="hidden" class="form-control" name="mpid" value="{{mp.id}}">       
                  <input type="hidden" class="form-control" name="action" value="start">        
                  <button type="submit" class="btn btn-primary btn-block">Start Meal Plan</button>
                </div>
              </form>
          {% endfor %}
        </div>
      {% else %}
        <p> There is currently no saved meal plans. Please go to add plan and create one now! </p>
      {% endif %}
    </div>
  <!--<footer id="pageFooter">Footer</footer>-->

<!-- bootstrap required scripts -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
{% endblock %}
