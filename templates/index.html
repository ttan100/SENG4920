{% extends "layout.html" %}
{% block extra_head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='stylesheet/index.css') }}" >
{% endblock %}
{% block body %}    
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-3 sticky-top sb">
                <form class="form-inline my-2 my-lg-0">
                  <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
                  <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </form></div>
            <div class="col-sm-6">
            {%for meal in meals%}
              <details id="something">
                <summary>
                  <img src={{ meal.img_url }} height="100" width="100" alt="Meal image">
                  <h2>{{meal.name}}</h2>
                  <p>Approximate cooking time: {{meal.total_cooking_time}}</p>
                </summary>
                <h5>Ingredients</h3>
                  <ul>
                    {% for ingredient in meal.ingredients %}
                      <li>{{ingredient}}</li>
                    {% endfor %}
                  </ul> 
                <h5>Instructions:</h3>
                <p> 
                  <ol>
                  {% for step in meal.recipe %}
                    <li>{{step}}</li>
                  {% endfor %}
                  </ol>
                </p>
                <button type="button" onclick="addMealToPlan({{loop.index0}}, '{{meals[loop.index0].name}}')"> Add meal </button>
              </details>
              <hr>
            {% endfor %}
            </div>
          <div class="col-sm-3 sticky-top sb">
            <h5>Current meal plan</h5>
            <div id="siteAds"></div>
          </div>
      </div>
  </div>
  <!--<footer id="pageFooter">Footer</footer>-->

<!-- Page scripts -->
<script>
	var plan = [];
	function displayPlan(){
		console.log(plan);
		var e = document.getElementById("siteAds");
		var t;
		e.innerHTML = "";
		for (m in plan) {
			t = document.createElement("div");
			t.innerHTML = plan[m].name;
			e.appendChild(t);
		}
	}

	function addMealToPlan(mealindex, mealname) {	
		var m = {"i": mealindex, "name": mealname}
  		plan.push(m);
  		displayPlan();
  	}
</script>

<!-- bootstrap required scripts -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
{% endblock %}
